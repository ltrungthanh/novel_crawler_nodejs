const e=(e,t)=>{let r=!1;for(let n=0;n<t.length;++n)if(-1!==e.indexOf(t.charAt(n))){r=!0;break}if(!r)return String(e);let n="";for(let r=0;r<e.length;++r)-1!==t.indexOf(e.charAt(r))&&(n+="\\"),n+=e.charAt(r);return n},t=function(e,t){const r=[];function n(e){e&&(r.length&&"string"===r[r.length-1].type?r[r.length-1].value+=e:r.push({type:"string",value:e}))}function i(e,t,n){r.push({type:"specifier",specifier:e,precision:t,substitutionIndex:n,value:void 0})}function o(e){const t=["black","red","green","yellow","blue","magenta","cyan","lightGray","","default"],n=["darkGray","lightRed","lightGreen","lightYellow","lightBlue","lightMagenta","lightCyan","white",""],i={color:t,colorLight:n,bgColor:t,bgColorLight:n},o={3:"color",9:"colorLight",4:"bgColor",10:"bgColorLight"}[Math.floor(e/10)];if(!o)return;const s=i[o][e%10];s&&r.push({type:"specifier",specifier:"c",value:{description:(o.startsWith("bg")?"background : ":"color: ")+s},precision:void 0,substitutionIndex:void 0})}let s=0,u=0;const l=new RegExp(`%%|%(?:(\\d+)\\$)?(?:\\.(\\d*))?([${Object.keys(t).join("")}])|\\u001b\\[(\\d+)m`,"g");for(let t=l.exec(e);null!==t;t=l.exec(e)){const r=t.index;if(r>s&&n(e.substring(s,r)),"%%"===t[0])n("%");else if(t[0].startsWith("%")){const[,e,r,n]=t;e&&Number(e)>0&&(u=Number(e)-1);i(n,r?Number(r):-1,u),++u}else{o(Number(t[4]))}s=r+t[0].length}return n(e.substring(s)),r},r=function(e,r,n,i,o,s){if(!e||(!r||!r.length)&&-1===e.search(/\u001b\[(\d+)m/))return{formattedResult:o(i,e),unusedSubstitutions:r};function u(){return'String.format("'+e+'", "'+Array.prototype.join.call(r,'", "')+'")'}function l(e){console.error(u()+": "+e)}let a=i;const c=s||t(e,n),f={},g=r||[];for(const e of c){if("string"===e.type){a=o(a,e.value);continue}if("specifier"!==e.type){l('Unknown token type "'+e.type+'" found.');continue}if(!e.value&&void 0!==e.substitutionIndex&&e.substitutionIndex>=g.length){l("not enough substitution arguments. Had "+g.length+" but needed "+(e.substitutionIndex+1)+", so substitution was skipped."),a=o(a,"%"+(void 0!==e.precision&&e.precision>-1?e.precision:"")+e.specifier);continue}if(e.value||void 0===e.substitutionIndex||(f[e.substitutionIndex]=!0),void 0===e.specifier||!(e.specifier in n)){h="unsupported format character “"+e.specifier+"”. Treating as a string.",console.warn(u()+": "+h);a=o(a,e.value||void 0===e.substitutionIndex?"":String(g[e.substitutionIndex]));continue}a=o(a,(0,n[e.specifier])(e.value||(void 0!==e.substitutionIndex?g[e.substitutionIndex]:void 0),e))}var h;const d=[];for(let e=0;e<g.length;++e)e in f||d.push(g[e]);return{formattedResult:a,unusedSubstitutions:d}},n={d:function(e){return isNaN(e)?0:e},f:function(e,t){e&&"number"==typeof e&&void 0!==t.precision&&t.precision>-1&&(e=e.toFixed(t.precision));const r=void 0!==t.precision&&t.precision>-1?Number(0).toFixed(t.precision):"0";return isNaN(e)?r:e},s:function(e){return e}},i=function(e,t){return r(e,t,n,"",((e,t)=>e+t)).formattedResult},o=function(e,...t){return i(e,t)},s=(e,t)=>{const r=[];let n=e.indexOf(t);for(;-1!==n;)r.push(n),n=e.indexOf(t,n+t.length);return r},u=function(){return"^[]{}()\\.^$*+?|-,"},l=function(e,t){return(e=e.toUpperCase())===(t=t.toUpperCase())?0:e>t?1:-1};var a=Object.freeze({__proto__:null,escapeCharacters:e,tokenizeFormatString:t,format:r,standardFormatters:n,vsprintf:i,sprintf:o,toBase64:e=>{function t(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}const r=(new TextEncoder).encode(e.toString()),n=r.length;let i,o="";if(0===n)return o;let s=0;for(let e=0;e<n;e++)i=e%3,s|=r[e]<<(16>>>i&24),2===i&&(o+=String.fromCharCode(t(s>>>18&63),t(s>>>12&63),t(s>>>6&63),t(63&s)),s=0);return 0===i?o+=String.fromCharCode(t(s>>>18&63),t(s>>>12&63),61,61):1===i&&(o+=String.fromCharCode(t(s>>>18&63),t(s>>>12&63),t(s>>>6&63),61)),o},findIndexesOfSubString:s,findLineEndingIndexes:e=>{const t=s(e,"\n");return t.push(e.length),t},isWhitespace:e=>/^\s*$/.test(e),trimURL:(e,t)=>{let r=e.replace(/^(https|http|file):\/\//i,"");return t&&r.toLowerCase().startsWith(t.toLowerCase())&&(r=r.substr(t.length)),r},collapseWhitespace:e=>e.replace(/[\s\xA0]+/g," "),reverse:e=>e.split("").reverse().join(""),replaceControlCharacters:e=>e.replace(/[\0-\x08\x0B\f\x0E-\x1F\x80-\x9F]/g,"�"),countWtf8Bytes:e=>{let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(n<=127)t++;else if(n<=2047)t+=2;else if(n<55296||57343<n)t+=3;else{if(n<=56319&&r+1<e.length){const n=e.charCodeAt(r+1);if(56320<=n&&n<=57343){t+=4,r++;continue}}t+=3}}return t},stripLineBreaks:e=>e.replace(/(\r)?\n/g,""),toTitleCase:e=>e.substring(0,1).toUpperCase()+e.substring(1),removeURLFragment:e=>{const t=new URL(e);return t.hash="",t.toString()},regexSpecialCharacters:u,filterRegex:function(e){let t="";for(let r=0;r<e.length;++r){let n=e.charAt(r);-1!=="^[]{}()\\.^$*+?|-,".indexOf(n)&&(n="\\"+n),r&&(t+="[^\\0"+n+"]*"),t+=n}return new RegExp(t,"i")},createSearchRegex:function(e,t,r){const n=t?"g":"gi";let i;if(r)try{i=new RegExp(e,n)}catch(e){}return i||(i=self.createPlainTextSearchRegex(e,n)),i},caseInsensetiveComparator:l,hashCode:function(e){if(!e)return 0;const t=4294967291;let r=0,n=1;for(let i=0;i<e.length;i++){r=(r+n*(1506996573*e.charCodeAt(i)))%t,n=1345575271*n%t}return r=(r+n*(t-1))%t,Math.abs(0|r)},compare:(e,t)=>e>t?1:e<t?-1:0,trimMiddle:(e,t)=>{if(e.length<=t)return String(e);let r=t>>1,n=t-r-1;return e.codePointAt(e.length-n-1)>=65536&&(--n,++r),r>0&&e.codePointAt(r-1)>=65536&&--r,e.substr(0,r)+"…"+e.substr(e.length-n,n)},trimEndWithMaxLength:(e,t)=>e.length<=t?String(e):e.substr(0,t-1)+"…",escapeForRegExp:t=>e(t,"^[]{}()\\.^$*+?|-,"),naturalOrderComparator:(e,t)=>{const r=/^\d+|^\D+/;let n,i,o,s;for(;;){if(!e)return t?-1:0;if(!t)return 1;if(n=e.match(r)[0],i=t.match(r)[0],o=!Number.isNaN(Number(n)),s=!Number.isNaN(Number(i)),o&&!s)return-1;if(s&&!o)return 1;if(o&&s){const e=Number(n)-Number(i);if(e)return e;if(n.length!==i.length)return Number(n)||Number(i)?i.length-n.length:n.length-i.length}else if(n!==i)return n<i?-1:1;e=e.substring(n.length),t=t.substring(i.length)}}});function c(e){"complete"===document.readyState||"interactive"===document.readyState?e():window.addEventListener("DOMContentLoaded",(function t(){window.removeEventListener("DOMContentLoaded",t,!1),e()}),!1)}function f(e,t){throw new Error(t)}String.sprintf=o,String.regexSpecialCharacters=u,String.caseInsensetiveComparator=l,self.createPlainTextSearchRegex=function(e,t){let r="";for(let t=0;t<e.length;++t){const n=e.charAt(t);-1!=="^[]{}()\\.^$*+?|-,".indexOf(n)&&(r+="\\"),r+=n}return new RegExp(r,t||"")},self.base64ToSize=function(e){if(!e)return 0;let t=3*e.length/4;return"="===e[e.length-1]&&t--,e.length>1&&"="===e[e.length-2]&&t--,t};function g(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function h(e,t,r,n,i,o){if(n<=r)return;const s=function(e,t,r,n,i){const o=e[i];g(e,n,i);let s=r;for(let i=r;i<n;++i)t(e[i],o)<0&&(g(e,s,i),++s);return g(e,n,s),s}(e,t,r,n,Math.floor(Math.random()*(n-r))+r);i<s&&h(e,t,r,s-1,i,o),s<o&&h(e,t,s+1,n,i,o)}function d(e,t,r,n){const i=[];let o=0,s=0;for(;o<e.length&&s<t.length;){const u=r(e[o],t[s]);!n&&u||i.push(u<=0?e[o]:t[s]),u<=0&&o++,u>=0&&s++}if(n){for(;o<e.length;)i.push(e[o++]);for(;s<t.length;)i.push(t[s++])}return i}function p(e,t,r,n,i){let o=n||0,s=void 0!==i?i:e.length;for(;o<s;){const n=o+s>>1;r(t,e[n])>0?o=n+1:s=n}return s}var m=Object.freeze({__proto__:null,removeElement:(e,t,r)=>{let n=e.indexOf(t);if(-1===n)return!1;if(r)return e.splice(n,1),!0;for(let r=n+1,i=e.length;r<i;++r)e[r]!==t&&(e[n++]=e[r]);return e.length=n,!0},sortRange:function(e,t,r,n,i,o){return 0===r&&n===e.length-1&&0===i&&o>=n?e.sort(t):h(e,t,r,n,i,o),e},binaryIndexOf:(e,t,r)=>{const n=p(e,t,r);return n<e.length&&0===r(t,e[n])?n:-1},intersectOrdered:(e,t,r)=>d(e,t,r,!1),mergeOrdered:(e,t,r)=>d(e,t,r,!0),DEFAULT_COMPARATOR:(e,t)=>e<t?-1:e>t?1:0,lowerBound:p,upperBound:function(e,t,r,n,i){let o=n||0,s=void 0!==i?i:e.length;for(;o<s;){const n=o+s>>1;r(t,e[n])>=0?o=n+1:s=n}return s}});var b=Object.freeze({__proto__:null,isValid:e=>!isNaN(e.getTime()),toISO8601Compact:e=>{function t(e){return(e>9?"":"0")+e}return e.getFullYear()+t(e.getMonth()+1)+t(e.getDate())+"T"+t(e.getHours())+t(e.getMinutes())+t(e.getSeconds())}});const x=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);var v=Object.freeze({__proto__:null,ARROW_KEYS:x,keyIsArrowKey:function(e){return x.has(e)}});class S{constructor(){this.map=new Map}set(e,t){let r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(t)}get(e){return this.map.get(e)||new Set}has(e){return this.map.has(e)}hasValue(e,t){const r=this.map.get(e);return!!r&&r.has(t)}get size(){return this.map.size}delete(e,t){const r=this.get(e);if(!r)return!1;const n=r.delete(t);return r.size||this.map.delete(e),n}deleteAll(e){this.map.delete(e)}keysArray(){return[...this.map.keys()]}valuesArray(){const e=[];for(const t of this.map.values())e.push(...t.values());return e}clear(){this.map.clear()}}var _=Object.freeze({__proto__:null,inverse:function(e){const t=new S;for(const[r,n]of e.entries())t.set(n,r);return t},Multimap:S});function w(e,...t){return i(e,Array.prototype.slice.call(arguments,1))}function y(e){return e}const C=new WeakMap;var N=Object.freeze({__proto__:null,LocalizedEmptyString:"",UIString:w,serializeUIString:function(e,t=[]){const r={messageParts:[e],values:t};return JSON.stringify(r)},deserializeUIString:function(e){return e?JSON.parse(e):{}},localize:y,UIStringFormat:class{constructor(e){this.localizedFormat=e,this.tokenizedFormat=t(this.localizedFormat,n)}format(...e){return r(this.localizedFormat,arguments,n,"",((e,t)=>e+t),this.tokenizedFormat).formattedResult}},ls:function(e,...t){if("string"==typeof e)return e;let r=C.get(e);return r||(r=e.join("%s"),C.set(e,r)),w(r,...t)}});var O=Object.freeze({__proto__:null,clamp:(e,t,r)=>{let n=e;return e<t?n=t:e>r&&(n=r),n},mod:(e,t)=>(e%t+t)%t,bytesToString:e=>{if(e<1e3)return w("%.0f B",e);const t=e/1e3;if(t<100)return w("%.1f kB",t);if(t<1e3)return w("%.0f kB",t);const r=t/1e3;return w(r<100?"%.1f MB":"%.0f MB",r)},toFixedIfFloating:e=>{if(!e||Number.isNaN(Number(e)))return e;const t=Number(e);return t%1?t.toFixed(3):String(t)},floor:(e,t=0)=>{const r=Math.pow(10,t);return Math.floor(e*r)/r}});var A=Object.freeze({__proto__:null,addAll:function(e,t){for(const r of t)e.add(r)},isEqual:function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}});function z(e){if(null===e)throw new Error("Expected given value to not be null but it was: "+e)}var I=Object.freeze({__proto__:null,assertNotNull:z});const{ls:R}=N;export{m as ArrayUtilities,b as DateUtilities,v as KeyboardUtilities,_ as MapUtilities,O as NumberUtilities,A as SetUtilities,a as StringUtilities,I as TypeScriptUtilities,N as UIString,f as assertNever,z as assertNotNull,R as ls,c as runOnWindowLoad};
